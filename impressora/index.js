//Atributos impressoras
class impressora
{
    constructor(marca, modelo, local, ip, Andar)
    {
        this.marca=marca;
        this.modelo=modelo;
        this.local=local;
        this.ip=ip;
        this.Andar=Andar;

    }

    toString ()
    {
        console.log(this.marca+" | "+this.modelo+" | "+this.local+" | "+this.ip+" | "+this.Andar);
    }
}


//------------------------///----------------------//------------------------------//-------------------//
var printer_LexMark_MS811dn_ip189 = new impressora ("Lexmark", "MS811 dn","Sala dr carlos", "192.168.0.83","Andar:1 ,Sala: 1");

//console.log (impressora1);
//------------------------//------------------------//--------------------------------//----------------//

var printer_LexMark_T630_ip154 = new impressora ("Lexmark", "T630","Ed. Física", "192.168.0.154","Andar:3 ,Sala: 1");

//console.log (impressora2);
//------------------------///----------------------//------------------------------//-------------------//
//local
var printer_LexMark_MS811dn_ipLocal = new impressora ("Lexmark", "MS811 dn","lugar", "local","Andar:x ,Sala: y");

//console.log (impressora3);
//------------------------///----------------------//------------------------------//-------------------//

var printer_LexMark_MS811dn_ip226 = new impressora ("Lexmark", "MS811 dn","Eletro", "192.168.0.226","Andar:1 ,Sala: y");

//console.log (impressora4);
//------------------------///----------------------//------------------------------//-------------------//

var printer_LexMark_MS811dn_ip238 = new impressora ("Lexmark", "MS811 dn","Consultório", "192.168.0.238""Andar:2 ,Sala: 14");

//console.log (impressora5);
//------------------------///----------------------//------------------------------//-------------------//
//local
var printer_LexMark_MS811dn_ipLocal = new impressora ("Lexmark", "MS811 dn","lugar", "local", "Andar:x ,Sala: y");

//console.log (impressora6);
//------------------------///----------------------//------------------------------//-------------------//
//local
var printer_LexMark_MS811dn_ipLocal = new impressora ("Lexmark", "MS811 dn","lugar", "local", "Andar:x ,Sala: y");

//console.log (impressora7);
//------------------------///----------------------//------------------------------//-------------------//

var printer_LexMark_MS811dn_ip239 = new impressora ("Lexmark", "MS811 dn","Compras", "192.168.0.239", "Andar: 2,Sala: 1");

//console.log (impressora8);
//------------------------///----------------------//------------------------------//-------------------//
var printer_LexMark_MS811dn_ip235 = new impressora ("Lexmark", "MS811 dn","Consultório 07", "192.168.0.235", "Andar:1,Sala:y");

//console.log (impressora9);
//------------------------///----------------------//------------------------------//-------------------//
var printer_LexMark_MX511de_ip44 = new impressora ("Lexmark", "MX511 de","Diretoria Técnica", "192.168.0.44", "Andar:x ,Sala: y");

//console.log (impressora10);
//------------------------///----------------------//------------------------------//-------------------//
var printer_Samsung_SCX5635_ip253 = new impressora ("Samsung", "SCX 5635","lugar", "192.168.0.253", "Andar:x ,Sala: y");

//console.log (impressora11);
//------------------------///----------------------//------------------------------//-------------------//
var printer_HP_laserjet400_ip157 = new impressora ("HP", "laserjet 400","lugar", "192.168.0.157", "Andar:x ,Sala: y");

//console.log (impressora12);
//------------------------///----------------------//------------------------------//-------------------//
//local
var printer_HP_laserjet1320_ipLocal = new impressora ("HP", "laserjet 1320","lugar", "local", "Andar:x ,Sala: y");

//console.log (impressora13);
//------------------------///----------------------//------------------------------//-------------------//
var printer_Phaser_3100MFP_ipLocal = new impressora ("Phaser", "3100MFP","lugar", "local", "Andar:x ,Sala: y");

//console.log (impressora14);
//------------------------///----------------------//------------------------------//-------------------//
var printer_LexMark_MS317_ip237 = new impressora ("Lexmark", "MS317","lugar", "192.168.0.237", "Andar:x ,Sala: y");

//console.log (impressora15);
//------------------------///----------------------//------------------------------//-------------------//
var printer_LexMark_MS317_ip242 = new impressora ("Lexmark", "MS317","lugar", "192.168.0.242", "Andar:x ,Sala: y");

//console.log (impressora16);
//------------------------///----------------------//------------------------------//-------------------//
var printer_LexMark_MX511_ipLocal = new impressora ("Lexmark", "MX511","lugar", "local", "Andar:x ,Sala: y");

//console.log (impressora17);
//------------------------///----------------------//------------------------------//-------------------//
var printer_LexMark_MS811dn_ip213 = new impressora ("Lexmark", "MS811 dn","lugar", "192.168.0.213", "Andar:x ,Sala: y");

//console.log (impressora18);
//------------------------///----------------------//------------------------------//-------------------//
var printer_LexMark_MS811dn_ip230 = new impressora ("Lexmark", "MS811 dn","lugar", "192.168.0.230", "Andar:x ,Sala: y");

//console.log (impressora19);
//------------------------///----------------------//------------------------------//-------------------//
var printer_LexMark_MX511_ip195 = new impressora ("Lexmark", "MX511","lugar", "192.168.0.195", "Andar:x ,Sala: y");

//console.log (impressora20);
//------------------------///----------------------//------------------------------//-------------------//
//local
var printer_Epson_L355_ipLocal = new impressora ("Epson", "L355","convivencia", "local", "Andar:x ,Sala: y");

//console.log (impressora21);
//------------------------///----------------------//------------------------------//-------------------//
var printer_LexMark_CS510_ip210 = new impressora ("Lexmark", "CS510 de","lugar", "192.168.0.210", "Andar:x ,Sala: y");

//console.log (impressora22);
//------------------------///----------------------//------------------------------//-------------------//
var printer_LexMark_MS317_ip224 = new impressora ("Lexmark", "MS317","lugar", "192.168.0.224", "Andar:x ,Sala: y");

//console.log (impressora23);
//------------------------///----------------------//------------------------------//-------------------//
var printer_LexMark_MS811dn_ip229 = new impressora ("Lexmark", "MS811 dn","lugar", "192.168.0.229", "Andar:x ,Sala: y");

//console.log (impressora24);
//------------------------///----------------------//------------------------------//-------------------//
var printer_LexMark_MS811dn_ip187 = new impressora ("Lexmark", "MS811 dn","lugar", "192.168.0.187", "Andar:x ,Sala: y");

//console.log (impressora25);
//------------------------//------------------------//--------------------------------//----------------//

var printer_Mdl_MS811dn_ip189 = new impressora ("Lexmark", "MS811 dn","Administracao", "192.168.0.189", "Andar:Terreo, Sala:8");

//console.log (impressora26);
//------------------------///----------------------//------------------------------//-------------------//
var printer_LexMark_MS317_ip227 = new impressora ("Lexmark", "MS317","lugar", "192.168.0.227", "Andar:x ,Sala: y");

//console.log (impressora27);
//------------------------///----------------------//------------------------------//-------------------//
var printer_LexMark_MS317_ip88 = new impressora ("Lexmark", "MS317","lugar", "192.168.0.88", "Andar:x ,Sala: y");

//console.log (impressora28);
//------------------------///----------------------//------------------------------//-------------------//
var printer_LexMark_T654_ip129 = new impressora ("Lexmark", "T654 dn","lugar", "192.168.0.129", "Andar:x ,Sala: y");

//console.log (impressora29);
//------------------------///----------------------//------------------------------//-------------------//
//NomeImpressora.toString();

//Fim Atributos Impressoras
console.log("==[index.js]=>");

var http = require('http'),
    https = require('https'),
    xpath = require('xpath'),
    dom = require('xmldom').DOMParser;


class impressora
{
    constructor(marca, modelo, local, ip, Andar)
    {
        this.marca=marca;
        this.modelo=modelo;
        this.local=local;
        this.ip=ip;
        this.Andar=Andar;

    }

    toString ()
    {
        console.log(this.marca+" | "+this.modelo+" | "+this.local+" | "+this.ip+" | "+this.Andar);
    }
}


var impLexmarkT654Compras = new impressora ("Lexmark", "T654 dn","lugar", "192.168.0.129");



function getDataFromXpath(xml,xpathToSelect)
{
    var doc = new dom().parseFromString(xml)
    var nodes = xpath.select(xpathToSelect, doc)
    
    console.log(nodes)
}

var requestsOptionsMap = 
{
    printer_M811dn_ip189 : 
	{
        host:       "192.168.0.2",
        port:       "3128",
        path:       "http://"+impLexmarkT654Compras.ip"+/cgi-bin/dynamic/printer/config/reports/devicestatistics.html",
        headers:    
	    {
                'Proxy-Authorization':  'Basic ' + new Buffer('wagner:nicolas1*').toString('base64')
            },
    
	    reqCallBackFn : function(response)
	    {
                console.log(response);
            }
        },
    dadosGov_Ubs_DatasetPage : 
	{
        xpathToCollect : 
		{
            dtaUltimaAtualizacaoDaPagina :"/html/body/div[3]/div/div[3]/div/article/div/section[3]/table/tbody/tr[3]/td/span"
        },
		
        host: "dados.gov.br",
        path: "/dataset/unidades-basicas-de-saude-ubs",
        reqCallBackFn : function(response)
		{
            let body = '';
            response.on('data', function(dta)
			{
                body += dta;
            });
			
            response.on('end', function()
			{
                getDataFromXpath(body,
                                 requestsOptionsMap.dadosGov_Ubs_DatasetPage.xpathToCollect.dtaUltimaAtualizacaoDaPagina);
            });
        }        
    }    
};

http.get(
    requestsOptionsMap.dadosGov_Ubs_DatasetPage,
    requestsOptionsMap.dadosGov_Ubs_DatasetPage.reqCallBackFn);
	
	
	
	
	
	
	
	
	
	


/*https.get(requestsOptionsMap.dadosGov_Ubs_DatasetPage, function(response) {
    var body = '';
    response.on('data', function(data) {
        body += data;
    });
    response.on('end', function() {
        console.log(body);
        //var parsed = JSON.parse(body);
        //console.log(parsed);
        //reqCallBackFn(parsed);
        //reqCallBackFn({
        //    email: parsed.email,
        //    password: parsed.pass
        //});
    });
});
*/
